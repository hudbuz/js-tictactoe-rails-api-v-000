<html>
	<head>
		<title>jQuery Tic Tac Toe</title>
	</head>
	<body>
		<table border="1" cellpadding="40">
			<tr>
				<td data-x="0" data-y="0"></td>
				<td data-x="1" data-y="0"></td>
				<td data-x="2" data-y="0"></td>
			</tr>
			<tr>
				<td data-x="0" data-y="1"></td>
				<td data-x="1" data-y="1"></td>
				<td data-x="2" data-y="1"></td>
			</tr>
			<tr>
				<td data-x="0" data-y="2"></td>
				<td data-x="1" data-y="2"></td>
				<td data-x="2" data-y="2"></td>
			</tr>
		</table>
		<div id="games"><ul id="games1"></ul>
		</div>
		<div id="message"></div>
		<button id="save">Save Game</button>
		<button id="previous">Show Previous Games</button>
	</body>
</html>



<script type="text/javascript">

$(function() {
  $('#save').on('click', function(event) {
    event.preventDefault();

  var board = {}
  board["state"] = getBoard()
  
  var posting = $.post('/games', board)

  posting.done(function(data) {

   var game = data["game"]
 
   fillBoard(game.state)
  
  	currentGame = game	
   
  })    
  })
})


$(function() {
	$('#previous').on('click',function(event){
		event.preventDefault();
		$('#games1').html("")
    $.get('/games', function(data){
      
      var games = data["games"]
      for (i = 0; i < games.length; i ++) {
        $('#games1').append('<li id="game '+games[i]["id"]+'">'+ games[i]["id"]+ '</li>')
      }
    })
  })
  $('#games1').on('click', 'li', function(event) {
		event.preventDefault();
		var id = this.innerHTML
		$.get('/games/' + id, function(data){
			var game = data["game"]
			fillBoard(game.state)
			currentGame = game
		})
	})
})


</script>